<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
    .playersContainer {
        background-color: aquamarine;
        display: flex;
        flex-direction: row;
    }
    .player {
        width: 50vw;
        max-width: 500px;
        border-radius: 8px;
    }
</style>

<div id="players" class="playersContainer">
    <video id="video1" class="player" muted></video>
    <video id="video2" class="player" muted></video>
</div>

<script>

    const spots = [ 
        { 
            id: 'saopedroestoria',
            name: 'Sao Pedro do Estoril',
            region: 'Linha'
        },
        { 
            id: 'carcavelos',
            name: 'Carcavelos',
            region: 'Linha'
        }
    ];

  const loadStream = (streamId, playerEl) => {
    const sessionId = 780981000 + Math.floor(Math.random() * 1000);
    if(Hls.isSupported()) {
        var hls = new Hls();
        hls.loadSource('https://video-auth1.iol.pt/beachcam/'+streamId+'/chunks.m3u8?nimblesessionid='+sessionId);
        hls.attachMedia(playerEl);
        hls.on(Hls.Events.MANIFEST_PARSED,function() {
        playerEl.play();
        });
    }
    else if (playerEl.canPlayType('application/vnd.apple.mpegurl')) {
        playerEl.src = 'https://video-auth1.iol.pt/beachcam/'+streamId+'/chunks.m3u8?nimblesessionid='+sessionId;
        playerEl.addEventListener('loadedmetadata',function() {
        playerEl.play();
        });
    }
  }
  loadStream('saopedroestoria', document.getElementById('video1'));
  loadStream('carcavelos', document.getElementById('video2'));
  
</script>